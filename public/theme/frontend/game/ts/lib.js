"use strict";(self.webpackChunkdoanso=self.webpackChunkdoanso||[]).push([[353],{677:(t,e,n)=>{n.d(e,{Z:()=>o});const o=function(){function t(){}return t.showLoading=function(){BASE_GUI.showLoading()},t.createFlashNotify=function(t,e){void 0===e&&(e=!0),BASE_GUI.createFlashNotify(t,e)},t.hideLoading=function(){BASE_GUI.hideLoading()},t}()},506:(t,e,n)=>{n.d(e,{Z:()=>o});const o=function(){function t(){}return t.all=function(t){return document.querySelectorAll(t)},t._=function(t){return document.querySelector(t)},t.flex=function(t){t.style.display="flex"},t.none=function(t){t.style.display="none"},t.on=function(t,e,n){document.addEventListener(t,(function(t){for(var o=t.target;o&&o!=this;o=o.parentNode)if(o.matches(e)){n(t);break}}),!1)},t}()},980:(t,e,n)=>{n.d(e,{Z:()=>r});var o=n(677),i=n(506);const r=function(){function t(t){void 0===t&&(t="ws://localhost:8888/"),this.socketUrl=t,this.connecter=null,this.wsReady=!1,this.openListeners=[],this.messageListeners=[],this.closeListeners=[],this.errorListeners=[]}return t.prototype.addOpenListener=function(t){t&&this.openListeners.push(t)},t.prototype.addMessageListener=function(t){t&&this.messageListeners.push(t)},t.prototype.addCloseListener=function(t){t&&this.closeListeners.push(t)},t.prototype.addErrorListener=function(t){t&&this.errorListeners.push(t)},t.prototype.sendData=function(t,e){void 0===e&&(e=!0),e&&o.Z.showLoading(),this.wsReady?this.connecter.send(t):o.Z.createFlashNotify("Không thể kết nối tới server",!1)},t.prototype.init=function(){var t=i.Z._("input[name=auth_token]");if(t){var e=t.value,n=this.socketUrl+"?auth_token=".concat(e);this.connecter=new WebSocket(n);var o=this;this.connecter.onopen=function(t){o.wsReady=!0;for(var e=0,n=o.openListeners;e<n.length;e++)(0,n[e])(t)},this.connecter.onmessage=function(t){for(var e=0,n=o.messageListeners;e<n.length;e++){var i=n[e],r={};t.data&&(r=JSON.parse(t.data)),i(t,r)}},this.connecter.onclose=function(t){o.wsReady=!1;for(var e=0,n=o.closeListeners;e<n.length;e++)(0,n[e])(t)},this.connecter.onerror=function(t){o.wsReady=!1;for(var e=0,n=o.errorListeners;e<n.length;e++)(0,n[e])(t)}}},t}()},174:(t,e,n)=>{n.d(e,{Z:()=>o});const o=function(t){this.formbet=t}},257:(t,e,n)=>{n.d(e,{Z:()=>r});var o=n(506),i=n(825);const r=function(){function t(t){this.lottoSocket=t,this.totalMinBet=0,this.betPerNumber=0,this.betWin=0,this.initEvents(),this.initSubmit(),this.changeHtmlPreview()}return t.prototype.initEvents=function(){var t=this;o.Z._('.box_booking input[name="bet"]').addEventListener("change",(function(e){var n=e.target;t.validateMoney(n),t.changeHtmlPreview()}))},t.prototype.initSubmit=function(){var t=this;o.Z._("#lotto_bet").addEventListener("click",(function(e){e.target,t.validateBetting()&&t.sendPlayRequest()}))},t.prototype.sendPlayRequest=function(){var t=o.Z._("input[name=bet]"),e=parseInt(t.value)||0,n=this.getNumberChoosen(),r=i.Z.getCurrentGameConfig().id;this.lottoSocket.sendPlayRequest(r,e,n)},t.prototype.validateBetting=function(){var t=i.Z.getCurrentGameConfig(),e=o.Z._("input[name=bet]");if(!e||!t)return!1;var n=parseInt(e.value)||0,r=this.getNumberChoosen().length,a=t.choose_min,s=t.choose_max,c=a==s?s:1,u=r*t.min_bet/c;return r<a||r>s?(a==s?alert("Bạn cần chọn ".concat(a," số!")):alert("Bạn cần chọn tối thiểu ".concat(a," số và tối đa ").concat(s," số!")),!1):!(n<u&&(alert("Số tiền tối thiểu là ".concat(u,"k!")),1))},t.prototype.validateMoney=function(t){var e=t.value;(e=Math.abs(e))>999999999999&&(e=999999999999),e<1&&(e=1),t.value=e},t.prototype.changeHtmlPreview=function(){this.changeHtmlMinBet(),this.changeHtmlBetPerNumber(),this.changeHtmlWinBet()},t.prototype.changeHtmlMinBet=function(){var t="-",e=i.Z.getCurrentGameConfig();if(e){var n=parseInt(e.min_bet),r=parseInt(e.choose_min);if(this.hasChoosen()){var a=this.getNumberChoosen().length/r;a=a<1?1:a,this.totalMinBet=n*a}else this.totalMinBet=n;t=String(this.totalMinBet)}o.Z._(".plot_total .min span").innerText=t},t.prototype.changeHtmlBetPerNumber=function(){var t="";if(this.hasChoosen()){var e=this.getTotalMoney();this.betPerNumber=e/this.totalMinBet,this.betPerNumber=Math.round(100*this.betPerNumber)/100,t=String(this.betPerNumber)}else t="-";o.Z._(".plot_total .money span").innerText=t},t.prototype.changeHtmlWinBet=function(){var t="";if(this.hasChoosen()){var e=i.Z.getCurrentGameConfig();if(e){var n=parseInt(e.win);this.betWin=this.betPerNumber*n,this.betWin=Math.round(100*this.betWin)/100,t=String(this.betWin)}}else t="-";o.Z._(".plot_total .money_win span").innerText=t},t.prototype.hasChoosen=function(){return o.Z.all(".ls_lotto span.lotto").length>0},t.prototype.getNumberChoosen=function(){for(var t=o.Z.all(".ls_lotto span.lotto"),e=[],n=0;n<t.length;n++){var i=t[n];e.push(i.innerText)}return e},t.prototype.getTotalMoney=function(){var t=o.Z._('.box_booking input[name="bet"]'),e=1;return t&&(e=parseInt(t.value)),e},t.prototype.updateBoxTitle=function(){i.Z.updateListLotto(),i.Z.changeGameTitle()},t}()},221:(t,e,n)=>{n.d(e,{Z:()=>c});var o,i=n(506),r=n(825),a=n(174),s=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const c=function(t){function e(e){var n=t.call(this,e)||this;return n.initEvents(),n}return s(e,t),e.prototype.initEvents=function(){var t=this;i.Z.on("click",".ls_number .item_number span",(function(e){var n=e.target,o=i.Z._('.panel .type_js.nav-item[data-state="true"]'),r=o.dataset.target,a=o.id,s=LOTTO_TYPES[a];n.classList.contains("choosen")?n.classList.remove("choosen"):t.validate(r,s)?n.classList.add("choosen"):alert("Bạn chỉ được đánh ".concat(s.choose_max," số!")),t.updateListLotto()}))},e.prototype.updateListLotto=function(){r.Z.updateListLotto(),this.formbet.changeHtmlPreview()},e.prototype.validate=function(t,e){var n=i.Z._(t).querySelectorAll(":scope .item_number span.choosen");return!(!e||n.length>=e.choose_max)},e.prototype.removeChoosen=function(){i.Z.all(".item_number span.choosen").forEach((function(t,e){t.classList.remove("choosen")}))},e}(a.Z)},353:(t,e,n)=>{n.d(e,{Z:()=>c});var o,i=n(506),r=n(825),a=n(174),s=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const c=function(t){function e(e){var n=t.call(this,e)||this;return n.initEvents(),n}return s(e,t),e.prototype.initEvents=function(){var t=this;i.Z.on("click",".ls_number .group_number button.btn_xs",(function(e){var n=e.target,o=i.Z._('.panel .type_js.nav-item[data-state="true"]'),r=o.dataset.target,a=o.id,s=(LOTTO_TYPES[a],n.parent,i.Z._(r)),c=t.getChooseNumber(s);t.addNumber(s,c),t.updateListLotto()})),i.Z.on("click",".ls_number .item_number_select span",(function(t){var e=t.target,n=e.innerHTML;confirm("Bạn muốn xóa số ".concat(n,"?"))&&e.parentElement.remove()}))},e.prototype.updateListLotto=function(){r.Z.updateListLotto(),this.formbet.changeHtmlPreview()},e.prototype.getChooseNumber=function(t){for(var e=t.querySelectorAll(".ls_number .group_number select"),n="",o=0;o<e.length;o++)n+=e[o].value;return n},e.prototype.addNumber=function(t,e){var n=t.querySelector(".ls_number .ls_number.list_choosen");if(n.querySelector('span[data-number="'.concat(e,'"]')))alert("Bạn đã chọn số ".concat(e," trước đó!"));else{var o='<label class="item_number_select">\n            <span type="checkbox" class="choosen" data-number="'.concat(e,'">').concat(e,"</span>\n        </label>");n.insertAdjacentHTML("beforeend",o)}},e.prototype.removeChoosen=function(){i.Z.all(".list_choosen .item_number_select span.choosen").forEach((function(t,e){t.parentElement.remove()}))},e}(a.Z)},847:(t,e,n)=>{n.d(e,{Z:()=>i});var o=n(506);const i=function(){function t(t){this.gameSocket=t,this.interValGameTime=null,this.timeRemaining=0,this.needRetreiveResult=!1,this.gamePlinkoTimeBox=o.Z._("#game-lotto-time-box")}return t.prototype.initInfo=function(t){var e;if(this.gamePlinkoTimeBox&&t.html){this.needRetreiveResult=!0,this.gamePlinkoTimeBox.innerHTML=t.html,this.timeRemaining=null!==(e=t.time_remaining)&&void 0!==e?e:0,this.interValGameTime&&clearInterval(this.interValGameTime);var n=this;n.runMainLoop(),this.interValGameTime=setInterval((function(){n.runMainLoop()}),1e3)}},t.prototype.runMainLoop=function(){var t=this.timeRemaining/60|0,e=this.timeRemaining%60|0;if(t=t<10?"0"+t:String(t),e=e<10?"0"+e:String(e),this.timeRemaining<=0)this.refreshGame();else{var n=this.gamePlinkoTimeBox.querySelector(".out .number");n&&(n.innerHTML='\n                        <div class="item">'.concat(t.substr(0,1),'</div>\n                        <div class="item">').concat(t.substr(1,1),'</div>\n                        <div class="item c-row c-row-middle">:</div>\n                        <div class="item">').concat(e.substr(0,1),'</div>\n                        <div class="item">').concat(e.substr(1,1),"</div>\n                    "))}this.showTimeChecker(),this.timeRemaining--},t.prototype.refreshGame=function(){this.interValGameTime&&clearInterval(this.interValGameTime),window.location.href=window.location.href},t.prototype.showTimeChecker=function(){var t=o.Z._(".result_plot_threads .mark-box"),e=parseInt(LOTTO_CONFIG.LAST_POINT_TO_BET),n=parseInt(LOTTO_CONFIG.NUMBER_TIME_TO_CHECK);if(this.timeRemaining<=e){o.Z.flex(t);var i=e-this.timeRemaining;i=(i=Math.abs(i-n))<10?"0"+i:""+i;for(var r="",a=0;a<i.length;a++)r+='<span class="item m-r-20">'.concat(i.charAt(a),"</span>");t.innerHTML=r}else o.Z.none(t);if(this.timeRemaining<n){if(!this.needRetreiveResult)return;this.needRetreiveResult=!1,this.gameSocket.retrieveResult()}},t}()},825:(t,e,n)=>{n.d(e,{Z:()=>i});var o=n(506);const i=function(){function t(){}return Object.defineProperty(t,"currentGameInfo",{get:function(){return t._currentGameInfo},set:function(e){t._currentGameInfo=e},enumerable:!1,configurable:!0}),t.changeGameTitle=function(){var t='<span class="domain xs">Miền Bắc</span> / ',e=o.Z._(".box_booking .box_mini .types"),n=o.Z._(".item_type_game.nav-item input[name=category]:checked").parentElement;n&&(t+='<span class="lotto xs">'.concat(n.innerText,"</span> / "));var i=o.Z._('.type_js.nav-item input[name="type"]:checked').parentElement;i&&(t+='<span class="type xs">'.concat(i.innerText,"</span>")),e.innerHTML=t},t.updateListLotto=function(){var t=o.Z._(".ls_lotto"),e="",n=o.Z.all(".item_number span.choosen"),i=o.Z.all(".list_choosen .item_number_select span.choosen");n.length>0?n.forEach((function(t,n){e+='<span class="lotto">'.concat(t.innerText,"</span>")})):i.length>0?i.forEach((function(t,n){e+='<span class="lotto">'.concat(t.innerText,"</span>")})):e='<span class="no-result">Chưa chọn số</span>',t.innerHTML=e},t.getCurrentTypeGame=function(){var t=o.Z._('.panel .type_js.nav-item[data-state="true"]');return t?t.id:0},t.getCurrentGameConfig=function(){var t=this.getCurrentTypeGame();return LOTTO_TYPES[t]||{}},t._currentGameInfo={},t}()},625:(t,e,n)=>{n.d(e,{Z:()=>c});var o=n(677);const i=function(){function t(t){this.psocket=t}return t.prototype.init=function(){var t=this;this.psocket.init(),this.psocket.addOpenListener((function(e){t.onOpenSocket(e)})),this.psocket.addCloseListener((function(e){t.onCloseSocket(e)})),this.psocket.addErrorListener((function(e){t.onErrorSocket(e)})),this.psocket.addMessageListener((function(e,n){t.onMessageSocket(e,n)}))},t.prototype.onOpenSocket=function(t){o.Z.hideLoading()},t.prototype.onCloseSocket=function(t){o.Z.showLoading(),o.Z.createFlashNotify("Không thể kết nối tới server",!1)},t.prototype.onErrorSocket=function(t){o.Z.showLoading(),o.Z.createFlashNotify("Không thể kết nối tới server",!1)},t.prototype.onMessageSocket=function(t,e){o.Z.hideLoading(),e.success&&e.action?this.processMessageData(e):e.message?o.Z.createFlashNotify(e.message):o.Z.createFlashNotify("Lỗi không xác đinh!")},t.prototype.sendData=function(t,e){void 0===e&&(e=!0),this.psocket.sendData(t,e)},t}();var r,a=n(825),s=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const c=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.onOpenSocket=function(e){t.prototype.onOpenSocket.call(this,e),this.initGame(),this.onOpenSocketCallback&&this.onOpenSocketCallback(e)},e.prototype.initGame=function(){var t={};t.type=connectionGameType,t.action=LOTTO_STATUS.GAME_ACTION_GET_CURRENT_GAME_INFO,this.sendData(JSON.stringify(t))},e.prototype.retrieveResult=function(){},e.prototype.sendPlayRequest=function(t,e,n){var o={};o.type=connectionGameType,o.action=LOTTO_STATUS.GAME_ACTION_DO_BET,o.currentGame=a.Z.currentGameInfo;var i={type:t,money:e,numbers:n};o.gameData=i,this.sendData(JSON.stringify(o))},e.prototype.betSuccess=function(t){o.Z.createFlashNotify("Bet thành công."),window.location.href=window.location.href},e.prototype.processMessageData=function(t){var e;switch(t.action){case LOTTO_STATUS.GAME_ACTION_GET_CURRENT_GAME_INFO:var n=t.data;a.Z.currentGameInfo.current_game_idx=null!==(e=n.current_game_idx)&&void 0!==e?e:"",this.onInitGameCallback&&this.onInitGameCallback(n);break;case LOTTO_STATUS.GAME_ACTION_DO_BET:this.betSuccess(t.data);case LOTTO_STATUS.GAME_ACTION_RETRIEVE_RESULT:}},e}(i)},462:(t,e,n)=>{n.d(e,{Z:()=>c});const o=function(){function t(){}return t.get=function(t,e){return void 0===e&&(e={}),new Promise((function(n,o){XHR.send({url:t,method:"GET",data:e}).then((function(t){200==t.code&&(t.html||t.data)?n(t):o(t)}))}))},t}();var i=n(677),r=n(506),a=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},s=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};const c=function(){function t(t,e,n){this.formbet=t,this.gameChoose=e,this.gameSelect=n}return t.prototype.init=function(){this.initEvents(),this.showQuestion(),this.loadPlinkoHistoryGame()},t.prototype.initEvents=function(){this.initEventCategoryChange(),this.initEventTypeChange()},t.prototype.initEventCategoryChange=function(){var t=this,e=r.Z.all(".item_type_game input");if(e.forEach((function(e){e.addEventListener("change",(function(e){return a(this,void 0,void 0,(function(){var e,n,o,a,c,u;return s(this,(function(s){switch(s.label){case 0:return i.Z.showLoading(),e=this,n=this.parentElement,o=e?e.value:0,[4,t.getGameContent(o)];case 1:return a=s.sent(),(c=r.Z._(n.getAttribute("data-target"))).parentElement.querySelectorAll(":scope > .panel").forEach((function(t,e){t.innerHTML=""})),c.innerHTML=a.html,t.updateAfterGetGameContent(),u=r.Z._(".type.type_js.nav-item input:checked").value,[4,t.getChoosenNumber(u)];case 2:return s.sent(),i.Z.hideLoading(),[2]}}))}))}),!1)})),e.length>0){var n=e[0],o=new Event("change");n.dispatchEvent(o)}},t.prototype.updateAfterGetGameContent=function(){this.formbet.updateBoxTitle(),this.formbet.changeHtmlPreview()},t.prototype.initEventTypeChange=function(){var t=this;r.Z.on("change",".type_js.nav-item input[name=type]",(function(e){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return i.Z.showLoading(),e=r.Z._(".type.type_js.nav-item input:checked").value,t.clearChoosenItem(),t.formbet.updateBoxTitle(),[4,t.getChoosenNumber(e)];case 1:return n.sent(),i.Z.hideLoading(),[2]}}))}))}))},t.prototype.clearChoosenItem=function(){this.gameChoose.removeChoosen(),this.gameSelect.removeChoosen()},t.prototype.getUrlGameContent=function(){return"get-game-lotto-content"},t.prototype.getGameContent=function(t){return o.get(this.getUrlGameContent(),{typeGame:t})},t.prototype.getUrlLottoChoosen=function(){return"get-game-lotto-choosen"},t.prototype.getChoosenNumber=function(t){return a(this,void 0,void 0,(function(){var e,n,i,a,c;return s(this,(function(s){switch(s.label){case 0:return[4,o.get(this.getUrlLottoChoosen(),{typeGame:t})];case 1:if(e=s.sent(),n=e.data,i="",n.length>0)for(a=0;a<n.length;a++)c=n[a],i+='<span class="lotto">'.concat(c,"</span>");return r.Z._(".ls_lotto_choosen").innerHTML=i,[2]}}))}))},t.prototype.showQuestion=function(){r.Z.on("click","span.question",(function(t){var e=t.target.nextElementSibling;e&&(e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active"))}))},t.prototype.getUrlHistory=function(){return"get-game-lotto-history"},t.prototype.loadPlinkoHistoryGame=function(){var t=this,e=document.querySelector("#game-gowin-history");e&&XHR.send({url:t.getUrlHistory(),method:"GET"}).then((function(n){200==n.code&&n.html&&(e.innerHTML=n.html,t.initPaginateBox(e))}))},t.prototype.initPaginateBox=function(t,e){void 0===e&&(e=null);var n=this;t.querySelectorAll(".paginate-box-link-btn.action").forEach((function(o){""!=o.dataset.href&&o.addEventListener("click",(function(){XHR.send({url:this.dataset.href,method:"GET"}).then((function(o){200==o.code&&o.html&&(t.innerHTML=o.html,n.initPaginateBox(t,e),e&&BASE_SUPPORT.callFunction(e))}))}))}))},t}()},169:(t,e,n)=>{n.d(e,{Z:()=>i});var o=n(506);const i=function(){function t(t){void 0===t&&(t=".nav-item"),this.selector=t,this.initEvents()}return t.prototype.initEvents=function(){var t=this;o.Z.on("click",this.selector,(function(e){var n=e.target,i=n.dataset.target,r=o.Z._(i);r&&(r.parentElement.querySelectorAll(":scope > .panel").forEach((function(t,e){t.style.display="none",t.dataset.state="hide"})),r.style.display="block",r.dataset.state="show",n.parentElement.querySelectorAll(":scope > "+t.selector).forEach((function(t,e){t.dataset.state="false"})),n.dataset.state="true")}))},t}()}}]);